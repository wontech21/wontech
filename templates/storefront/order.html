{% extends 'storefront/base.html' %}

{% block title %}Order Online â€” {{ org.organization_name }}{% endblock %}

{% block content %}
<section class="sf-section sf-section--tight" id="sfOrderPage">
    <div class="sf-container">
        <h1 class="sf-page-title">Order Online</h1>

        <div class="sf-search" id="sfSearch">
            <svg class="sf-search__icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
            </svg>
            <input type="text" class="sf-search__input" id="sfSearchInput" placeholder="Search menu or ingredients..." autocomplete="off">
            <button class="sf-search__clear" id="sfSearchClear" type="button" aria-label="Clear search">&times;</button>
        </div>

        {% if not is_open %}
        <div class="sf-alert sf-alert--warning">
            <strong>We're currently closed.</strong> You can still browse the menu, but orders can only be placed during business hours.
        </div>
        {% endif %}

        <!-- Order Type Picker -->
        {% include 'storefront/components/_order_type_picker.html' %}

        <!-- Menu content loaded by JS -->
        <div id="sfMenuContainer">
            <div class="sf-category-nav" id="sfCategoryNav">
                <div class="sf-category-nav__scroll" id="sfCategoryPills">
                    <!-- Populated by JS -->
                </div>
            </div>
            <div id="sfMenuSections">
                <!-- Loading skeleton -->
                <div class="sf-skeleton-grid">
                    {% for i in range(6) %}
                    <div class="sf-skeleton sf-skeleton--card"></div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Checkout Section (hidden initially) -->
{% include 'storefront/components/_checkout_form.html' %}

<!-- Confirmation Screen (hidden initially) -->
<div class="sf-confirmation" id="sfConfirmation" style="display:none;">
    <div class="sf-container sf-text-center">
        <div class="sf-confirmation__icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--sf-primary)" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        </div>
        <h2 class="sf-confirmation__title">Order Confirmed!</h2>
        <p class="sf-confirmation__number" id="sfConfirmNumber"></p>
        <p class="sf-confirmation__estimate" id="sfConfirmEstimate"></p>
        <div class="sf-confirmation__actions">
            <a href="#" id="sfTrackLink" class="sf-btn sf-btn--primary sf-btn--lg">Track Your Order</a>
            <a href="{{ '' if is_custom_domain else '/s/' + slug }}/order" class="sf-btn sf-btn--outline">Place Another Order</a>
        </div>
    </div>
</div>

{% block scripts %}
<script src="/static/js/storefront-checkout.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        SF.initOrderPage();
    });
</script>
{% endblock %}
{% endblock %}
